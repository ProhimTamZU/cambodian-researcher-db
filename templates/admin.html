{% extends "base.html" %}
{% block content %}

<div class="flex justify-between mb-6">
    <h1 class="text-2xl font-semibold">Admin Dashboard</h1>
    <div class="space-x-2">
        <a href="/add" class="bg-green-600 text-white px-4 py-2 rounded">+ Add</a>
        <a href="/logout" class="bg-red-600 text-white px-4 py-2 rounded">Logout</a>
    </div>
</div>

<div class="overflow-x-auto bg-white shadow rounded">
<table class="min-w-full text-sm">
<thead class="bg-gray-100">
<tr>
    <th class="px-4 py-3">No</th>
    <th class="px-4 py-3">Name</th>
    <th class="px-4 py-3">Field</th>
    <th class="px-4 py-3">Institution</th>
    <th class="px-4 py-3">Profiles</th>
    <th class="px-4 py-3 text-center">Actions</th>
</tr>
</thead>

<tbody class="divide-y">
{% for item in data %}
<tr>
    <td class="px-4 py-3">{{ loop.index }}</td>
    <td class="px-4 py-3 font-medium">{{ item.r.name }}</td>
    <td class="px-4 py-3">
        {% for f in item.r.field.split(',') %}
        <span class="bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded mr-1">
            {{ f.strip() }}
        </span>
        {% endfor %}
    </td>
    <td class="px-4 py-3">{{ item.r.institution }}</td>
    <td class="px-4 py-3 space-x-1">
        {% for p in item.profiles %}
        <span class="bg-indigo-100 text-indigo-700 text-xs px-2 py-1 rounded">
            {{ p.platform }}
        </span>
        {% endfor %}
    </td>
    <td class="px-4 py-3 text-center space-x-1">
        <a href="/edit/{{ item.r.id }}" class="bg-yellow-500 px-3 py-1 rounded text-xs">Edit</a>
        <a href="/delete/{{ item.r.id }}"
           onclick="return confirm('Delete researcher?')"
           class="bg-red-600 text-white px-3 py-1 rounded text-xs">
           Delete
        </a>
    </td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

{% endblock %}
